#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
# â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— mescr modules             
# â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘  â•šâ•â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• not lisensed              
# â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•   â•šâ•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— https://t.me/mescr_m      
# â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â• â•šâ•â•  â•šâ•â•  
#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
#â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# meta developer: @mescr_m 
#â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# idea:             
# thanks:                   
#â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

from .. import utils, loader
import random
import asyncio
import time

__version__ = (1, 0, 0)

class SpeedTypingTest(loader.Module):
    '''ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ ÑĞºĞ¾Ñ€Ğ¾Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ¸. \nDeveloper: @mescr_m'''

    strings = {
        'name': 'SpeedTypingTest',
    }

    easy = [
        "ĞĞ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒ",
        "Ğ¢Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚",
        "Ğ”Ğ¾Ğ¼Ğ°ÑˆĞ½Ğ¸Ğ¹",
        "Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½",
        "ĞšĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€",
        "ĞĞºĞ¾Ğ½Ğ½Ñ‹Ğ¹",
        "ĞŸĞ¾Ğ´ÑŠĞµĞ·Ğ´",
        "ĞÑ„Ñ€Ğ¸ĞºĞ°",
        "Ğ¢Ñ€ĞµĞ½Ğ°Ğ¶ĞµÑ€",
        "ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€"
    ]
    medium = [
        "Ğ¯ ÑƒĞµÑ…Ğ°Ğ» Ğ·Ğ°Ğ³Ğ¾Ñ€Ğ¾Ğ´, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ñ‚Ğ´Ğ¾Ñ…Ğ½ÑƒÑ‚ÑŒ.",
        "Ğ¯ ÑĞ´ĞµĞ»Ğ°Ğ» Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¸Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€.",
        "ĞœĞ½Ğµ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ³Ğ°Ñ€Ğ°Ğ·Ğ´Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ, Ñ‡ĞµĞ¼ Ğ²Ñ‡ĞµÑ€Ğ°.",
        "Ğ¯ Ğ½Ğ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ Ğ´ÑƒĞ¼Ğ°Ğ» Ğ¾Ğ± ÑÑ‚Ğ¾Ğ¼.",
        "Ğ¢Ñ‹ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ ÑÑ‚Ğ¾Ğ³Ğ¾?",
        "Ğ¯ Ğ½Ğµ Ğ´ÑƒĞ¼Ğ°Ñ, Ñ‡Ñ‚Ğ¾ Ñ‚Ğ°Ğº Ğ±ÑƒĞ´ĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾.",
        "ĞŸÑ€Ğ¸ĞµÑ…Ğ°Ğ² ÑÑĞ´Ğ° Ñ Ğ¿Ğ¾Ğ½ÑĞ», Ñ‡Ñ‚Ğ¾ Ğ²ÑĞµ Ğ½Ğµ Ñ‚Ğ°Ğº Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾.",
        "Ğ¯ Ğ¶Ğµ Ğ½Ğµ Ğ¾Ğ´Ğ¸Ğ½ ÑÑ‚Ğ¾ ÑƒĞ²Ğ¸Ğ´Ğ¸Ğ»?",
        "Ğ˜ Ñ‡Ñ‚Ğ¾? Ğ¢Ñ‹ Ğ´ÑƒĞ¼Ğ°ĞµÑˆÑŒ, Ñ‡Ñ‚Ğ¾ Ñ‚Ñ‹ Ğ¾Ğ´Ğ¸Ğ½ Ñ‚Ğ°ĞºĞ¾Ğ¹?",
        "Ğ§ĞµĞ³Ğ¾ Ñ‚Ñ‹ Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ Ğ´Ğ¾Ğ±Ğ¸Ñ‚ÑŒÑÑ ÑÑ‚Ğ¸Ğ¼?"
    ]
    hard = [
        "Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ñ…Ğ¾Ğ´Ğ¸Ğ» Ğ½Ğ° Ğ¿Ñ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… AirPods.",
        "Ğ’Ñ‡ĞµÑ€Ğ° Ğ¿ĞµÑ€ĞµÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°Ğ» ÑĞ²Ğ¾Ğ¹ Windows.",
        "Ğ’Ğ¾Ñ‚ Ñ‚ĞµĞ±Ğµ Ğ¿Ğ°Ñ€Ñƒ Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ñ… ÑĞ»Ğ¾Ğ²: apple, cloud, phone.",
        "ĞšĞ°Ğº Ñ‚Ñ‹ Ğ´ÑƒĞ¼Ğ°ĞµÑˆÑŒ, Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Samsung S21 ÑĞ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑŒÑÑ Ğ½Ğ° ÑÑ‚Ğ¾Ğ¹ Ğ½ĞµĞ´ĞµĞ»Ğµ?",
        "Ğ’Ñ‡ĞµÑ€Ğ° ĞºÑƒĞ¿Ğ¸Ğ» ÑĞµĞ±Ğµ Xbox, Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ¿Ğ¾Ğ¹Ğ´Ñƒ Ğ·Ğ° PlayStation.",
        "ĞšĞ°Ğº ÑĞºĞ·Ğ°Ğ°Ñ‚ÑŒ 'Ğ Ğ¾ÑÑĞ¸Ñ' Ğ¿Ğ¾ Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸? - Russia!",
        "Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Userbot? Ğ­Ñ‚Ğ¾ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ±Ñ€ĞµĞ½Ğ´?",
        "ĞšĞ°Ğº Ñ‚ĞµĞ±Ğµ ÑĞµÑ€Ğ¸Ğ°Ğ» Ğ¾Ñ‚ Netflix - 'Arcane'?",
        "Ğ’Ñ‡ĞµÑ€Ğ° Ñ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ğ» Internet, ĞºĞ°Ğº Ğ²Ğ°Ğ¼ Ğ¼ĞµĞ¼Ñ‹ Ñ ĞºĞ¾Ñ‚Ğ¸ĞºĞ°Ğ¼Ğ¸?",
        "Ğ’Ğ°Ñˆ 'Microsoft' - Ğ¿Ğ»Ğ°Ğ½ Ğ¿Ğ¾ Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‚Ñƒ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµÑ‡ĞµÑÑ‚Ğ²Ğ°."
    ]
    fword = 'ÑĞ»Ğ¾Ğ²Ğ¾'
    status = False
    start_time = 0
    end_time = 0

    @loader.watcher(out=True, only_messages=True, no_commands=True)
    async def tester_w(self, message):
        if self.status == True and self.status == True:
            self.end_time = time.time()
            text = message.text
            elapsed_time = time.time() - self.start_time
            seconds = int(elapsed_time)
            milliseconds = int((elapsed_time - seconds) * 1000)
            time_formatted = f"{seconds}.{milliseconds:03d}"
            self.dstatus = False
            self.status = False
            await utils.answer(message, f'{text}\n\n<emoji document_id=5307717998826497825>ğŸŒ€</emoji> ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°...')
            txt_f, txt_t = '', ''
            error_count = 0
            txt_t, txt_f = ''.join(self.fword.split()), ''.join(text.split())
            for f, t in zip(list(txt_f), list(txt_t)):
                if f != t:
                    error_count += 1
            percent = 100 - error_count/len(txt_t)*100
            result = "Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾" if percent == 100 else "Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾" if percent >= 90 else "ÑÑ€ĞµĞ´Ğ½Ğµ" if percent >= 70 else "Ğ¿Ğ»Ğ¾Ñ…Ğ¾"
            await utils.answer(message, f"{text}\n\n<emoji document_id=5445284980978621387>ğŸš€</emoji> Ğ’Ğ°Ñˆ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: {time_formatted}\n<emoji document_id=5188208446461188962>ğŸ’¯</emoji> Ğ¡Ñ…Ğ¾Ğ¶ĞµÑÑ‚ÑŒ: {percent}%\n<emoji document_id=5334882760735598374>ğŸ“</emoji> Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: {result}")

    @loader.command()
    async def sttstart(self, message):
        '''[ easy / medium / hard ] - Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚\n\nğŸŸ¢ easy - Ğ»ĞµĞ³ĞºĞ¸Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ, Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ½Ğ¾ ÑĞ»Ğ¾Ğ²Ğ¾.\nğŸŸ¡ medium - Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ.\nğŸ”´ hard - Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ Ñ Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¼ ÑĞ»Ğ¾Ğ²Ğ¾Ğ¼.\n'''
        args = utils.get_args_raw(message)
        if args:
            if args == 'easy':
                word = random.choice(self.easy)
            elif args == 'medium':
                word = random.choice(self.medium)
            elif args == 'hard':
                word = random.choice(self.hard)
            else:
                await utils.answer(message, f'<emoji document_id=5980953710157632545>ğŸš«</emoji> <b>Error</b> // <code>{message.raw_text}</code>'
                '\n\n<emoji document_id=5818973781707722673>ğŸ—£</emoji> <b><u>Ğ¡ÑƒÑ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸:</u></b>\nĞĞµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾ Ğ½Ğ¸ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸.'
                '\n\n<emoji document_id=5821302890932736039>ğŸ—£</emoji> <b><u>Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:</u></b>\nĞ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ¾Ğ´Ğ½Ñƒ Ğ¸Ğ· ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ñ… ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹: easy, medium, hard.')
                return
            self.fword = word
            await utils.answer(message, f'<emoji document_id=5334882760735598374>ğŸ“</emoji> ĞĞ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ: {word}\n<emoji document_id=5451732530048802485>â³</emoji> Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ñ‡ĞµÑ€ĞµĞ· 3...')
            await asyncio.sleep(1)
            await utils.answer(message, f'<emoji document_id=5334882760735598374>ğŸ“</emoji> ĞĞ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ: {word}\n<emoji document_id=5451732530048802485>â³</emoji> Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ñ‡ĞµÑ€ĞµĞ· 2...')
            await asyncio.sleep(1)
            await utils.answer(message, f'<emoji document_id=5334882760735598374>ğŸ“</emoji> ĞĞ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ: {word}\n<emoji document_id=5451732530048802485>â³</emoji> Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ñ‡ĞµÑ€ĞµĞ· 1...')
            await asyncio.sleep(1)
            await utils.answer(message, f'<emoji document_id=5334882760735598374>ğŸ“</emoji> ĞĞ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ: {word}\n<emoji document_id=5219943216781995020>âš¡ï¸</emoji> ĞŸĞ˜Ğ¨Ğ˜Ğ¢Ğ•!')
            self.status = True
            self.start_time = time.time()
            return
        else:
            await utils.answer(message, f'<emoji document_id=5980953710157632545>ğŸš«</emoji> <b>Error</b> // <code>{message.raw_text}</code>'
            '\n\n<emoji document_id=5818973781707722673>ğŸ—£</emoji> <b><u>Ğ¡ÑƒÑ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸:</u></b>\nĞĞµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾ Ğ½Ğ¸ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸.'
            '\n\n<emoji document_id=5821302890932736039>ğŸ—£</emoji> <b><u>Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:</u></b>\nĞ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ¾Ğ´Ğ½Ñƒ Ğ¸Ğ· ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ñ… ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹: easy, medium, hard.')
            return

    @loader.command()
    async def sttreset(self, message):
        '''- ÑĞ±Ñ€Ğ¾Ñ, ĞµÑĞ»Ğ¸ Ğ²Ğ¾Ğ·Ğ½Ğ¸ĞºĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ°'''
        self.fword = 'ÑĞ»Ğ¾Ğ²Ğ¾'
        self.status = False
        self.start_time = 0
        self.end_time = 0
        await utils.answer(message, f'<emoji document_id=5292226786229236118>ğŸ”„</emoji> ĞœĞ¾Ğ´ÑƒĞ»ÑŒ ÑĞ±Ñ€Ğ¾ÑˆĞµĞ½.')
